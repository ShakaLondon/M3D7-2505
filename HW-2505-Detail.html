<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
    integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" />
  <!-- Font Awesome -->
  <!-- <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet"> -->

  <!-- MapBox -->
  <script src='https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.css' rel='stylesheet' />

  <style>
    .userCard {
      height: 400px;
    }
  </style>

</head>

<body>

  <div id="main" class="container-fluid mx-0 px-0">
    <div class="row mx-0">

      <div class="col-6 mx-0 px-0">
        <div class="jumbotron" style='width: 50vw; height: 100vh; float: left;'>
          <h1 class="display-4" id="IDName">Hello, world!</h1>
          <p class="lead" id="IDuserName">This is a simple hero unit, a simple jumbotron-style component for calling extra attention to
            featured content or information.</p>
          <p id="IDemailAddress">It uses utility classes for typography and spacing to space content out within the larger container.</p>
          <hr class="my-4">
          <p id="IDaddress">It uses utility classes for typography and spacing to space content out within the larger container.</p>
          <p class="lead" id="IDcompany">Company</p>
        </div>
      </div>

      <div class="col-6 mb-0 mx-0 px-0">
        <div id='map' style='width: 50vw; height: 100vh; float: right;'></div>
      </div>

    </div>

  </div>

  </div>


  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
    crossorigin="anonymous"></script>
  <script src="https://use.fontawesome.com/d0e67a28fc.js"></script>

  <script>

        // Search window
        const queryString = window.location.search;
    console.log(queryString);

    const urlParams = new URLSearchParams(queryString);

    console.log(urlParams)

    const contactUserID = urlParams.get('userID')

    console.log(contactUserID)

    // get user Data

    let myData

    let mainDiv = document.createElement("div")

    mainDiv.setAttribute("id", "main")

    // let fetchingUsers = () => {
    fetch(`https://jsonplaceholder.typicode.com/users`)
      .then((res) => res.json())
      .then((data) => {
        console.log(data);
        myData = data;
        console.log(myData)
      })
      .then(// fill user details to page

    function fillUser() {

      let x = contactUserID - 1

      let selectedUser = myData[x]

      console.log(myData)

      console.log(contactUserID)

      // myData.forEach(user => {
      //   if (user.id === contactUserID){
      //     const selectedUser = user
      //   }
      // });

      console.log(selectedUser)

      // Add Name

      const nameElem = document.getElementById("IDName")

      nameElem.innerHTML = selectedUser.name

      // Add Username

      const usernameElem = document.getElementById("IDuserName")

      usernameElem.innerHTML = selectedUser.username

      // Add email

      const emailElem = document.getElementById("IDemailAddress")

      emailElem.innerHTML = selectedUser.email

      // Add address

      const addressElem = document.getElementById("IDaddress")

      const address = selectedUser.address

      addressElem.innerHTML = `Address: ${address.suite}  ${address.street},
      ${address.city}, ${address.city}
      (${address.zipcode})`

      const geo = address.geo

      // Add company

      const companyElem = document.getElementById("IDcompany")

      companyElem.setAttribute("class", "lead")

      companyUser = selectedUser.company

      companyElem.innerHTML = companyUser.name

      const companyWebsite = selectedUser.website

      const phoneNumber = selectedUser.phone

      const companyInfo = document.createElement("p")

      companyInfo.innerHTML = `${selectedUser.phone}, <a href="www.${companyWebsite}" class="text-decoration-none">${companyWebsite}</a>`

      const col = companyElem.parentElement

      col.appendChild(companyInfo)



      // Add Map

      const userLat = geo.lat

      const userLng = geo.lng

      console.log(userLng, userLat)



      const lat = Math.round(userLat*10)/10

      const lng = Math.round(userLng*10)/10

      console.log(lat, lng)

    

      mapboxgl.accessToken = 'pk.eyJ1Ijoib2ZmaWNpYWxzaGFrIiwiYSI6ImNqOTQxeTh0dzNidXgycW43M3BvbHlzYW8ifQ.Vhpzod2HBdLHoupyQqFW0g';
      var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v11',
        center: [`${lat}`, `${lng}`],
        zoom: 5,
      });


    })

  </script>

</body>

</html>